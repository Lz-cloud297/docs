{"openapi":"3.0.1","info":{"title":"钱包即服务 WaaS API 文档","description":"<h2 style='font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;'>API 通用描述</h2><p>所有请求参数必须组装成 <strong>JSON 格式</strong> 的请求体，并使用 <strong>RSA 公钥</strong> 对整个 JSON 请求体加密。将加密后的数据进行 <strong>Base64 编码</strong>，然后将 Base64 编码后的数据作为 <code>data</code> 参数提交给 API 接口。</p><h2 style='font-size: 1.5rem; font-weight: bold; margin-top: 2rem; margin-bottom: 1rem;'>支持币种</h2><div style='margin-bottom: 1.5rem;'>    <h3 style='font-size: 1.25rem; font-weight: bold; margin-bottom: 0.5rem;'>USDT</h3>    <ul>        <li>TRC20 - <span style='color: green; font-weight: bold;'>支持</span></li>        <li>ERC20 - <span style='color: green; font-weight: bold;'>支持</span></li>        <li>BEP20 - <span style='color: orange; font-weight: bold;'>开发中</span></li>    </ul></div><div style='margin-bottom: 1.5rem;'>    <h3 style='font-size: 1.25rem; font-weight: bold; margin-bottom: 0.5rem;'>PHT</h3>    <ul>        <li>TRC20 - <span style='color: green; font-weight: bold;'>支持</span></li>        <li>ERC20 - <span style='color: green; font-weight: bold;'>支持</span></li>    </ul></div><div style='margin-bottom: 1.5rem;'>    <h3 style='font-size: 1.25rem; font-weight: bold; margin-bottom: 0.5rem;'>USDC</h3>    <ul>        <li>ERC20 - <span style='color: orange; font-weight: bold;'>开发中</span></li>    </ul></div><h2 style='font-size: 1.5rem; font-weight: bold; margin-top: 2rem; margin-bottom: 1rem;'>钱包地址格式约定</h2><ul>    <li><strong>TRON：</strong>钱包地址中字母区分大小写。</li>    <li><strong>ETH：</strong>钱包地址中字母统一使用小写。</li></ul><h2 style='font-size: 1.5rem; font-weight: bold; margin-top: 2rem; margin-bottom: 1rem;'>风险评分参考</h2><ul>    <li><strong>低风险：</strong> 0 ~ 30，无风险或低风险。</li>    <li><strong>中风险：</strong> 31 ~ 64，可能与中高风险地址有过交易。</li>    <li><strong>高风险：</strong> 65 ~ 84，与中高风险地址有过交易，建议做隔离。</li>    <li><strong>严重风险：</strong> 85 ~ 100，与高危风险地址有过交易，建议立即隔离。</li></ul>","contact":{"name":"API 支持团队","url":"https://example.com","email":"support@example.com"},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"},"version":"V1.7"},"servers":[{"url":"https://prod.api.waas.com","description":"生产环境"},{"url":"https://dev.api.waas.com","description":"测试环境"}],"security":[{"ApiKey":[]}],"paths":{"/user/getUserDailyStatistics":{"post":{"tags":["user-controller"],"summary":"获取用户每日统计","description":"提供指定租户及日期的业务日报统计数据，包含充值、提现、钱包余额等关键指标。数据返回时根据加密类型（如 RSA 加密）进行加密处理，在下面的例子中数据已经经过解密。","operationId":"getUserDailyStatistics","parameters":[{"in":"header","$ref":"#/components/parameters/myGlobalHeader"}],"requestBody":{"description":"每日统计请求参数（JSON 格式）","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDailyStatisticsDto"},"example":{"userId":1308734,"jobDate":"2023-10-25"}}},"required":true},"responses":{"200":{"description":"成功响应，返回每日统计结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UUDailyStatisticsListVo"},"example":{"jobDay":"2023-10-01","totalDepositAmount":15000.5,"totalDepositCount":100,"totalDepositUserCount":50,"totalWithdrawAmount":8000.25,"totalWithdrawCount":80,"totalWithdrawUserCount":40,"pendingCollectionAmount":200.0,"collectionCount":10,"pendingCollectionAddressCount":5,"coldWalletBalance":1000000.0,"hotWalletBalance":50000.75,"additionalTransferHotWallet":1000.0,"tenantId":1308734}}}}}}},"/user/getUserAddress":{"post":{"tags":["user-controller"],"summary":"获取用户存币地址","description":"获取用户存币地址，若没有该用户会自动注册用户 ID 并返回钱包地址。","operationId":"getUserAddress","parameters":[{"in":"header","$ref":"#/components/parameters/myGlobalHeader"}],"requestBody":{"description":"用户参数（JSON 格式）用于获取存币地址的请求。若用户不存在，会自动注册。","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"},"example":{"chainName":"TRON","symbol":"USDT","tenantUserId":"tenant123","env":"","userId":1318758,"tenantType":1}}},"required":true},"responses":{"200":{"description":"成功返回用户地址","content":{"application/json":{"schema":{"type":"object","example":{"code":0,"data":{"tenantUserId":"tenant123","chainName":"TRON","address":"TPXLEfsrochsCB3WiTb7urvnx7wtQZKbFm","tag":"","state":1,"riskScore":85},"message":""}},"example":{"code":0,"data":{"tenantUserId":"tenant123","chainName":"TRON","address":"TPXLEfsrochsCB3WiTb7urvnx7wtQZKbFm","tag":"","state":1,"riskScore":85},"message":""}}}},"401":{"description":"用户未授权","content":{"application/json":{"example":{"code":"UNAUTHORIZED","message":"unauthorized"}}}},"403":{"description":"访问被拒绝，用户权限不足","content":{"application/json":{"example":{"code":"FORBIDDEN","message":"forbidden"}}}},"404":{"description":"资源未找到","content":{"application/json":{"example":{"code":"NOT FOUND","message":"not found"}}}}}}},"/order/withdraw":{"post":{"tags":["order-controller"],"operationId":"withdraw","parameters":[{"in":"header","$ref":"#/components/parameters/myGlobalHeader"}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/APIResult"}}}}}}},"/order/withdrawWithoutVerify":{"post":{"tags":["order-controller"],"summary":"提交无需二次确认的提币单","description":"商户提交无需二次确认的提币订单。","operationId":"withdrawWithoutVerify","parameters":[{"in":"header","$ref":"#/components/parameters/myGlobalHeader"}],"requestBody":{"description":"提交提币订单请求参数（JSON 格式）","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDTO"},"example":{"callBackId":"D782243635","userId":1,"tenantUserId":"tenant123","tenantType":1,"amount":0.5,"symbol":"TRX","chainName":"TRON","txId":"tx12345","fromAddr":"fromAddress123","toAddr":"toAddress123","tag":""}}},"required":true},"responses":{"200":{"description":"成功返回订单信息","content":{"application/json":{"example":{"code":0,"data":{"id":"order12345","tenantUserId":"tenant123"},"message":""}}}},"401":{"description":"用户未授权","content":{"application/json":{"example":{"code":"UNAUTHORIZED","message":"Unauthorized"}}}},"403":{"description":"访问被拒绝，用户权限不足","content":{"application/json":{"example":{"code":"FORBIDDEN","message":"Forbidden"}}}},"404":{"description":"资源未找到","content":{"application/json":{"example":{"code":"NOT FOUND","message":"Not Found"}}}}}}},"/order/withdrawRequest":{"post":{"tags":["order-controller"],"summary":"请求提币订单（需二次确认）","description":"商户提交提币订单，完成提币操作。","operationId":"withdrawRequest","parameters":[{"in":"header","$ref":"#/components/parameters/myGlobalHeader"}],"requestBody":{"description":"提币订单请求参数（JSON 格式）","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDTO"},"example":{"callBackId":"D782243635","userId":1,"tenantUserId":"tenant123","tenantType":1,"amount":0.5,"symbol":"TRX","chainName":"TRON","txId":"tx12345","fromAddr":"fromAddress123","toAddr":"toAddress123","tag":""}}},"required":true},"responses":{"200":{"description":"成功返回订单信息","content":{"application/json":{"schema":{"type":"object"},"example":{"code":0,"data":{"id":"order12345","tenantUserId":"tenant123"},"message":""}}}},"401":{"description":"用户未授权","content":{"application/json":{"examples":{"未授权示例":{"description":"未授权示例","value":{"code":"UNAUTHORIZED","message":"Unauthorized"}}}}}},"403":{"description":"访问被拒绝，用户权限不足","content":{"application/json":{"examples":{"权限不足示例":{"description":"权限不足示例","value":{"code":"FORBIDDEN","message":"Forbidden"}}}}}},"404":{"description":"资源未找到","content":{"application/json":{"examples":{"资源未找到示例":{"description":"资源未找到示例","value":{"code":"NOT FOUND","message":"Not Found"}}}}}}}}},"/order/speedUp":{"post":{"tags":["order-controller"],"summary":"提交加速存币单请求","description":"提交加速存币单请求。当用户存币单在管理后台系统未查找到时，重新抓取存币单信息。","operationId":"speedUp","parameters":[{"in":"header","$ref":"#/components/parameters/myGlobalHeader"}],"requestBody":{"description":"提交加速存币单请求参数（JSON 格式）","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDTO"},"example":{"callBackId":"D782243635","userId":1,"tenantUserId":"tenant123","tenantType":1,"amount":0.5,"symbol":"TRX","chainName":"TRON","txId":"tx12345","fromAddr":"fromAddress123","toAddr":"toAddress123","tag":""}}},"required":true},"responses":{"200":{"description":"成功返回加速存币单信息","content":{"application/json":{"examples":{"成功响应示例":{"description":"成功响应示例","value":{"code":0,"data":{"id":"order12345","tenantUserId":"tenant123"},"message":""}}}}}},"401":{"description":"用户未授权","content":{"application/json":{"example":{"code":"UNAUTHORIZED","message":"Unauthorized"}}}},"403":{"description":"访问被拒绝，用户权限不足","content":{"application/json":{"example":{"code":"FORBIDDEN","message":"Forbidden"}}}},"404":{"description":"资源未找到","content":{"application/json":{"example":{"code":"NOT FOUND","message":"Not Found"}}}}}}},"/order/getWithdrawOrder":{"post":{"tags":["order-controller"],"summary":"获取提币单状态","description":"获取提币单状态，用户或商户需要重新确认提币单状态。","operationId":"getWithdrawOrder","parameters":[{"in":"header","$ref":"#/components/parameters/myGlobalHeader"}],"requestBody":{"description":"获取提币单状态请求参数（JSON 格式）","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDTO"},"example":{"callBackId":"12345","userId":1,"tenantUserId":"tenant123","tenantType":1,"amount":0.5,"symbol":"TRX","chainName":"TRON","txId":"tx12345","fromAddr":"fromAddress123","toAddr":"toAddress123","tag":""}}},"required":true},"responses":{"200":{"description":"成功返回提币单状态信息","content":{"application/json":{"example":{"code":0,"data":{"orderId":null,"symbol":"USDT","baseCurrency":null,"amount":5,"fiatAmount":null,"executedAmount":null,"executedFiatAmount":null,"price":null,"fee":null,"feeSymbol":null,"orderType":null,"orderState":3,"clientOrderId":"client_order_123"},"message":""}}}},"401":{"description":"用户未授权","content":{"application/json":{"example":{"code":"UNAUTHORIZED","message":"Unauthorized"}}}},"403":{"description":"访问被拒绝，用户权限不足","content":{"application/json":{"example":{"code":"FORBIDDEN","message":"Forbidden"}}}},"404":{"description":"资源未找到","content":{"application/json":{"example":{"code":"NOT FOUND","message":"Not Found"}}}}}}},"/coin/listCoin":{"post":{"tags":["coin-config-controller"],"operationId":"listCoin","parameters":[{"in":"header","$ref":"#/components/parameters/myGlobalHeader"}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/APIResult"}}}}}}}},"components":{"schemas":{"UserDailyStatisticsDto":{"required":["jobDate","userId"],"type":"object","properties":{"jobDate":{"type":"string","description":"统计日期（格式：yyyy-MM-dd）","format":"date-time"},"userId":{"type":"integer","description":"用户 ID","format":"int32","example":1001}},"description":"用户每日统计请求参数对象"},"UUDailyStatisticsListVo":{"type":"object","properties":{"jobDay":{"type":"string","description":"数据统计的日期（格式：yyyy-MM-dd）","format":"date-time"},"totalDepositAmount":{"type":"number","description":"当日用户充值总金额","example":15000.5},"totalDepositCount":{"type":"integer","description":"当日充值总笔数","format":"int32","example":100},"totalDepositUserCount":{"type":"integer","description":"当日进行充值的用户数","format":"int32","example":50},"totalWithdrawAmount":{"type":"number","description":"当日用户提现总金额","example":8000.25},"totalWithdrawCount":{"type":"integer","description":"当日提现总笔数","format":"int32","example":80},"totalWithdrawUserCount":{"type":"integer","description":"当日进行提现的用户数","format":"int32","example":40},"pendingCollectionAmount":{"type":"number","description":"系统中待归集的总金额","example":200.0},"collectionCount":{"type":"integer","description":"当日完成的归集操作笔数","format":"int32","example":10},"pendingCollectionAddressCount":{"type":"integer","description":"当前待归集的地址数量","format":"int32","example":5},"coldWalletBalance":{"type":"number","description":"冷钱包的余额","example":1000000.0},"hotWalletBalance":{"type":"number","description":"热钱包的余额","example":50000.75},"additionalTransferHotWallet":{"type":"number","description":"当日热钱包额外转入的金额","example":1000.0},"tenantId":{"type":"integer","description":"租户ID","format":"int32","example":1308734}},"description":"每日统计结果对象"},"UserDTO":{"required":["chainName","symbol","tenantType","tenantUserId","userId"],"type":"object","properties":{"chainName":{"type":"string","description":"链名","example":"TRON"},"symbol":{"type":"string","description":"货币符号","example":"USDT"},"tenantUserId":{"type":"string","description":"租户用户 ID（商户系统中的用户 ID）","example":"tenant123"},"env":{"type":"string","description":"环境（默认为空）"},"userId":{"type":"integer","description":"租户 ID（商户接入时由平台分配）","format":"int32","example":1318758},"tenantType":{"type":"integer","description":"租户类型（默认为 1）","format":"int32","example":1}}},"APIResult":{"type":"object","properties":{"message":{"type":"string"},"code":{"type":"integer","format":"int32"},"data":{"type":"object"}}},"OrderDTO":{"required":["amount","callBackId","chainName","fromAddr","symbol","tenantType","tenantUserId","toAddr","userId"],"type":"object","properties":{"callBackId":{"type":"string","description":"回调订单 ID","example":"D782243635"},"userId":{"type":"integer","description":"三方用户 ID","format":"int32","example":1},"tenantUserId":{"type":"string","description":"租户用户 ID","example":"tenant123"},"tenantType":{"type":"integer","description":"三方不同业务类型 (JD 专用)","format":"int32","example":1},"amount":{"type":"number","description":"提币金额","example":0.5},"symbol":{"type":"string","description":"货币符号","example":"TRX"},"chainName":{"type":"string","description":"链名","example":"TRON"},"txId":{"type":"string","description":"交易 ID","example":"tx12345"},"fromAddr":{"type":"string","description":"来源地址","example":"fromAddress123"},"toAddr":{"type":"string","description":"目标地址","example":"toAddress123"},"tag":{"type":"string","description":"标签"}}}},"parameters":{"Content-Type":{"name":"Content-Type","in":"header","description":"请求内容类型，固定为 multipart/form-data","required":true,"schema":{"type":"string"}}},"securitySchemes":{"ApiKey":{"type":"apiKey","description":"平台分配的 API-KEY，用于身份验证","name":"X-API-KEY"}}}}